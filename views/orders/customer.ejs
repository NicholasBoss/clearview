<!-- Dropdown of "create new customer" or any existing customers

if create is selected, show form to create new customer
if existing customer is selected, show their details and option to edit -->

<form id="customerForm" action="/orders/customer" method="post">
  <div>
    <label for="customerSelect">Select Customer:</label>
    <select id="customerSelect" name="customerSelect" onchange="toggleCustomerForm()">
      <option value="create">Create New Customer</option>
      <% customers.forEach(function(customer) { %>
        <option value="<%= customer.customer_firstname %> <%= customer.customer_lastname %>"><%= customer.customer_firstname %> <%= customer.customer_lastname %></option>
      <% }); %>
    </select>
  </div>

  <div id="newCustomerForm" style="display: block; margin-top: 20px; padding: 20px; border: 1px solid #ccc; border-radius: 4px;">
    <h3>Create New Customer</h3>
    <div>
      <label><b>First Name:</b>
        <input type="text" id="firstName" name="firstName">
      </label>
    </div>
    <div style="margin-top: 10px;">
      <label><b>Last Name:</b>
        <input type="text" id="lastName" name="lastName">
      </label>
    </div>
    <div style="margin-top: 10px;">
      <label><b>Address Line 1:</b>
        <input type="text" id="addressLine1" name="addressLine1">
      </label>
    </div>
    <div style="margin-top: 10px;">
      <label for="addressLine2"><b>Address Line 2:</b>
        <input type="text" id="addressLine2" name="addressLine2">
      </label>
    </div>
    <div style="margin-top: 10px;">
      <label><b>City:</b>
        <input type="text" id="city" name="city">
      </label>
    </div>
    <div style="margin-top: 10px;">
      <label><b>State:</b>
        <input type="text" id="state" name="state">
      </label>
    </div>
    <div style="margin-top: 10px;">
      <label><b>Zip:</b>
        <input type="text" id="zip" name="zip">
      </label>
    </div>
  </div>

  <div id="createCustomerButton" style="display: block; margin-top: 20px;">
    <button type="submit" style="padding: 10px 20px;">Create Customer</button>
  </div>

  <div id="continueButton" style="display: none; margin-top: 20px;">
    <button type="submit" style="padding: 10px 20px;">Continue</button>
  </div>
</form>

<script>
function toggleCustomerForm() {
  const customerSelect = document.getElementById('customerSelect');
  const newCustomerForm = document.getElementById('newCustomerForm');
  const createCustomerButton = document.getElementById('createCustomerButton');
  const continueButton = document.getElementById('continueButton');
  
  if (customerSelect.value === 'create') {
    newCustomerForm.style.display = 'block';
    createCustomerButton.style.display = 'block';
    continueButton.style.display = 'none';
    sessionStorage.removeItem('selectedCustomerId');
  } else {
    newCustomerForm.style.display = 'none';
    createCustomerButton.style.display = 'none';
    continueButton.style.display = 'block';
    sessionStorage.setItem('selectedCustomerId', customerSelect.value);
  }
}
</script>